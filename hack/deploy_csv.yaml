# This file was autogenerated by github.com/codeready-toolchain/api/olm-catalog.sh'
---
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: codeready-toolchain-saas-toolchain-host-operator
  namespace: openshift-marketplace
spec:
  configMap: codeready-toolchain-saas-toolchain-host-operator
  displayName: Codeready Toolchain Saas Toolchain Host Operator
  publisher: Red Hat
  sourceType: internal
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: codeready-toolchain-saas-toolchain-host-operator
  namespace: openshift-marketplace
data:
  customResourceDefinitions: |-
    - apiVersion: apiextensions.k8s.io/v1beta1
      kind: CustomResourceDefinition
      metadata:
        creationTimestamp: null
        name: masteruserrecords.toolchain.dev.openshift.com
      spec:
        group: toolchain.dev.openshift.com
        names:
          kind: MasterUserRecord
          listKind: MasterUserRecordList
          plural: masteruserrecords
          shortNames:
          - mur
          singular: masteruserrecord
        scope: Namespaced
        subresources:
          status: {}
        validation:
          openAPIV3Schema:
            description: MasterUserRecord is the Schema for the masteruserrecords API
            properties:
              apiVersion:
                description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
                type: string
              kind:
                description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
                type: string
              metadata:
                type: object
              spec:
                description: MasterUserRecordSpec defines the desired state of MasterUserRecord
                properties:
                  deprovisioned:
                    description: If set to true then the corresponding UserAccount should
                      be deleted "false" is assumed by default
                    type: boolean
                  disabled:
                    description: If set to true then the corresponding user should not be
                      able to login (but the underlying UserAccounts still exists) "false"
                      is assumed by default
                    type: boolean
                  userAccounts:
                    description: The list of user accounts in the member clusters which
                      belong to this MasterUserRecord
                    items:
                      properties:
                        spec:
                          description: The spec of the corresponding UserAccount
                          properties:
                            disabled:
                              description: If set to true then the corresponding user should
                                not be able to login "false" is assumed by default
                              type: boolean
                            nsLimit:
                              description: The namespace limit name
                              type: string
                            nsTemplateSet:
                              description: Namespace template set
                              properties:
                                namespaces:
                                  description: The namespace templates
                                  items:
                                    description: NSTemplateSetNamespace the namespace definition
                                      in an NSTemplateSet resource
                                    properties:
                                      revision:
                                        description: The revision of the corresponding template
                                        type: string
                                      template:
                                        description: Optional field. Used to specify a custom
                                          template
                                        type: string
                                      type:
                                        description: 'The type of the namespace. For example:
                                          ide|cicd|stage|default'
                                        type: string
                                    required:
                                    - revision
                                    - type
                                    type: object
                                  type: array
                                tierName:
                                  description: The name of the tier represented by this
                                    template set
                                  type: string
                              required:
                              - namespaces
                              - tierName
                              type: object
                            userID:
                              description: UserID is the user ID from RHD Identity Provider
                                token (“sub” claim) Is to be used to create Identity and
                                UserIdentityMapping resources
                              type: string
                          required:
                          - nsLimit
                          - nsTemplateSet
                          - userID
                          type: object
                        syncIndex:
                          description: SyncIndex is to be updated by UserAccount Controller
                            when the member needs to trigger MasterUserRecord <-> UserAccount
                            synchronization
                          type: string
                        targetCluster:
                          description: The cluster in which the user exists
                          type: string
                      required:
                      - spec
                      - syncIndex
                      - targetCluster
                      type: object
                    type: array
                  userID:
                    description: UserID is the user ID from RHD Identity Provider token
                      (“sub” claim)
                    type: string
                required:
                - userID
                type: object
              status:
                description: MasterUserRecordStatus defines the observed state of MasterUserRecord
                properties:
                  conditions:
                    description: 'Conditions is an array of current Master User Record conditions
                      Supported condition types: Provisioning, UserAccountNotReady and Ready'
                    items:
                      properties:
                        lastTransitionTime:
                          description: Last time the condition transit from one status to
                            another.
                          format: date-time
                          type: string
                        message:
                          description: Human readable message indicating details about last
                            transition.
                          type: string
                        reason:
                          description: (brief) reason for the condition's last transition.
                          type: string
                        status:
                          description: Status of the condition, one of True, False, Unknown.
                          type: string
                        type:
                          description: Type of condition
                          type: string
                      required:
                      - status
                      - type
                      type: object
                    type: array
                  userAccounts:
                    description: The status of user accounts in the member clusters which
                      belong to this MasterUserRecord
                    items:
                      properties:
                        conditions:
                          description: 'Conditions is an array of current User Account conditions
                            Supported condition types: ConditionReady'
                          items:
                            properties:
                              lastTransitionTime:
                                description: Last time the condition transit from one status
                                  to another.
                                format: date-time
                                type: string
                              message:
                                description: Human readable message indicating details about
                                  last transition.
                                type: string
                              reason:
                                description: (brief) reason for the condition's last transition.
                                type: string
                              status:
                                description: Status of the condition, one of True, False,
                                  Unknown.
                                type: string
                              type:
                                description: Type of condition
                                type: string
                            required:
                            - status
                            - type
                            type: object
                          type: array
                        syncIndex:
                          description: SyncIndex is used for checking if there is needed
                            some MasterUserRecord <-> UserAccount synchronization for this
                            specific UserAccount in the specific member cluster
                          type: string
                        targetCluster:
                          description: The cluster in which the user exists
                          type: string
                      required:
                      - syncIndex
                      - targetCluster
                      type: object
                    type: array
                type: object
        version: v1alpha1
        versions:
        - name: v1alpha1
          served: true
          storage: true
      status:
        acceptedNames:
          kind: ""
          plural: ""
        conditions: []
        storedVersions: []
    - apiVersion: apiextensions.k8s.io/v1beta1
      kind: CustomResourceDefinition
      metadata:
        creationTimestamp: null
        name: nstemplatetiers.toolchain.dev.openshift.com
      spec:
        group: toolchain.dev.openshift.com
        names:
          kind: NSTemplateTier
          listKind: NSTemplateTierList
          plural: nstemplatetiers
          shortNames:
          - tier
          singular: nstemplatetier
        scope: Namespaced
        subresources:
          status: {}
        validation:
          openAPIV3Schema:
            description: NSTemplateTier is the Schema for the nstemplatetiers API
            properties:
              apiVersion:
                description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
                type: string
              kind:
                description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
                type: string
              metadata:
                type: object
              spec:
                description: NSTemplateTierSpec defines the desired state of NSTemplateTier
                properties:
                  namespaces:
                    description: The namespace templates
                    items:
                      description: NSTemplateTierNamespace the namespace definition in an
                        NSTemplateTier resource
                      properties:
                        revision:
                          description: The revision of the corresponding template
                          type: string
                        template:
                          description: Template contains an OpenShift Template to be used
                            for namespace provisioning
                          properties:
                            apiVersion:
                              description: 'APIVersion defines the versioned schema of this
                                representation of an object. Servers should convert recognized
                                schemas to the latest internal value, and may reject unrecognized
                                values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
                              type: string
                            kind:
                              description: 'Kind is a string value representing the REST
                                resource this object represents. Servers may infer this
                                from the endpoint the client submits requests to. Cannot
                                be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              description: labels is a optional set of labels that are applied
                                to every object during the Template to Config transformation.
                              type: object
                            message:
                              description: message is an optional instructional message
                                that will be displayed when this template is instantiated.
                                This field should inform the user how to utilize the newly
                                created resources. Parameter substitution will be performed
                                on the message before being displayed so that generated
                                credentials and other parameters can be included in the
                                output.
                              type: string
                            metadata:
                              description: Standard object's metadata.
                              type: object
                            objects:
                              description: objects is an array of resources to include in
                                this template. If a namespace value is hardcoded in the
                                object, it will be removed during template instantiation,
                                however if the namespace value is, or contains, a ${PARAMETER_REFERENCE},
                                the resolved value after parameter substitution will be
                                respected and the object will be created in that namespace.
                              items:
                                type: object
                              type: array
                            parameters:
                              description: parameters is an optional array of Parameters
                                used during the Template to Config transformation.
                              items:
                                description: Parameter defines a name/value variable that
                                  is to be processed during the Template to Config transformation.
                                properties:
                                  description:
                                    description: Description of a parameter. Optional.
                                    type: string
                                  displayName:
                                    description: 'Optional: The name that will show in UI
                                      instead of parameter ''Name'''
                                    type: string
                                  from:
                                    description: From is an input value for the generator.
                                      Optional.
                                    type: string
                                  generate:
                                    description: "generate specifies the generator to be
                                      used to generate random string from an input value
                                      specified by From field. The result string is stored
                                      into Value field. If empty, no generator is being
                                      used, leaving the result Value untouched. Optional.
                                      \n The only supported generator is \"expression\",
                                      which accepts a \"from\" value in the form of a simple
                                      regular expression containing the range expression
                                      \"[a-zA-Z0-9]\", and the length expression \"a{length}\".
                                      \n Examples: \n from             | value -----------------------------
                                      \"test[0-9]{1}x\"  | \"test7x\" \"[0-1]{8}\"       |
                                      \"01001100\" \"0x[A-F0-9]{4}\"  | \"0xB3AF\" \"[a-zA-Z0-9]{8}\"
                                      | \"hW4yQU5i\""
                                    type: string
                                  name:
                                    description: Name must be set and it can be referenced
                                      in Template Items using ${PARAMETER_NAME}. Required.
                                    type: string
                                  required:
                                    description: 'Optional: Indicates the parameter must
                                      have a value.  Defaults to false.'
                                    type: boolean
                                  value:
                                    description: Value holds the Parameter data. If specified,
                                      the generator will be ignored. The value replaces
                                      all occurrences of the Parameter ${Name} expression
                                      during the Template to Config transformation. Optional.
                                    type: string
                                required:
                                - name
                                type: object
                              type: array
                          required:
                          - objects
                          type: object
                        type:
                          description: 'The type of the namespace. For example: ide|cicd|stage|default'
                          type: string
                      required:
                      - revision
                      - template
                      - type
                      type: object
                    type: array
                required:
                - namespaces
                type: object
              status:
                description: NSTemplateTierStatus defines the observed state of NSTemplateTier
                type: object
        version: v1alpha1
        versions:
        - name: v1alpha1
          served: true
          storage: true
      status:
        acceptedNames:
          kind: ""
          plural: ""
        conditions: []
        storedVersions: []
    - apiVersion: apiextensions.k8s.io/v1beta1
      kind: CustomResourceDefinition
      metadata:
        creationTimestamp: null
        name: usersignups.toolchain.dev.openshift.com
      spec:
        additionalPrinterColumns:
        - JSONPath: .spec.userID
          name: User ID
          priority: 1
          type: string
        - JSONPath: .spec.username
          name: Username
          priority: 1
          type: string
        - JSONPath: .spec.targetCluster
          name: TargetCluster
          priority: 1
          type: string
        - JSONPath: .status.conditions[?(@.type=="Complete")].status
          name: Complete
          type: string
        - JSONPath: .status.conditions[?(@.type=="Complete")].reason
          name: Reason
          type: string
        - JSONPath: .status.conditions[?(@.type=="Approved")].status
          name: Approved
          priority: 1
          type: string
        - JSONPath: .status.conditions[?(@.type=="Approved")].reason
          name: ApprovedBy
          priority: 1
          type: string
        group: toolchain.dev.openshift.com
        names:
          kind: UserSignup
          listKind: UserSignupList
          plural: usersignups
          singular: usersignup
        scope: Namespaced
        subresources:
          status: {}
        validation:
          openAPIV3Schema:
            description: UserSignup is the Schema for the usersignup API
            properties:
              apiVersion:
                description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
                type: string
              kind:
                description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
                type: string
              metadata:
                type: object
              spec:
                description: UserSignupSpec defines the desired state of UserSignup
                properties:
                  approved:
                    description: If Approved set to 'true' then the user has been manually
                      approved If not set then the user is subject of auto-approval (if
                      enabled)
                    type: boolean
                  compliantUsername:
                    description: The DNS-1123-compliant username.  This username is generated
                      by the registration app and may differ from the Username, as a limited
                      character set is available for naming (see RFC1123).  If the username
                      contains characters which are disqualified, the username is transformed
                      into a compliant name instead. For example, johnsmith@redhat.com ->
                      johnsmith-at-redhat-com
                    type: string
                  targetCluster:
                    description: The cluster in which the user is provisioned in If not
                      set then the target cluster will be picked automatically
                    type: string
                  username:
                    description: The user's username, obtained from the identity provider.
                    type: string
                required:
                - compliantUsername
                - username
                type: object
              status:
                description: UserSignupStatus defines the observed state of UserSignup
                properties:
                  conditions:
                    description: 'Conditions is an array of current UserSignup conditions
                      Supported condition types: PendingApproval, Provisioning, Complete'
                    items:
                      properties:
                        lastTransitionTime:
                          description: Last time the condition transit from one status to
                            another.
                          format: date-time
                          type: string
                        message:
                          description: Human readable message indicating details about last
                            transition.
                          type: string
                        reason:
                          description: (brief) reason for the condition's last transition.
                          type: string
                        status:
                          description: Status of the condition, one of True, False, Unknown.
                          type: string
                        type:
                          description: Type of condition
                          type: string
                      required:
                      - status
                      - type
                      type: object
                    type: array
                type: object
        version: v1alpha1
        versions:
        - name: v1alpha1
          served: true
          storage: true
      status:
        acceptedNames:
          kind: ""
          plural: ""
        conditions: []
        storedVersions: []
  clusterServiceVersions: |-
    - apiVersion: operators.coreos.com/v1alpha1
      kind: ClusterServiceVersion
      metadata:
        annotations:
          alm-examples: |-
            [
              {
                "apiVersion": "toolchain.dev.openshift.com/v1alpha1",
                "kind": "MasterUserRecord",
                "metadata": {
                  "name": "johnsmith"
                },
                "spec": {
                  "userAccounts": [
                    {
                      "spec": {
                        "nsLimit": "admin",
                        "nsTemplateSet": {
                          "namespaces": [
                            {
                              "revision": "abcdef",
                              "type": "ide"
                            },
                            {
                              "revision": "1d2f3q",
                              "type": "cicd"
                            },
                            {
                              "revision": "a34r57",
                              "type": "stage"
                            },
                            {
                              "revision": "ra24qw",
                              "type": "default"
                            }
                          ],
                          "tierName": "basic"
                        },
                        "userID": "1a03ecac-7c0b-44fc-b66d-12dd7fb21c40"
                      },
                      "syncIndex": "135540409",
                      "targetCluster": "east-2a"
                    }
                  ],
                  "userID": "1a03ecac-7c0b-44fc-b66d-12dd7fb21c40"
                }
              },
              {
                "apiVersion": "toolchain.dev.openshift.com/v1alpha1",
                "kind": "NSTemplateTier",
                "metadata": {
                  "name": "basic"
                },
                "spec": {
                  "namespaces": [
                    {
                      "revision": "abcdef",
                      "template": "{\"apiVersion\":\"v1\",\"kind\":\"Template\",\"metadata\":{\"name\":\"ide-template\"},\"objects\":{\"apiVersion\":\"v1\",\"kind\":\"ProjectRequest\",\"metadata\":{\"name\":\"$USERNAME-ide\"}}}\n",
                      "type": "ide"
                    },
                    {
                      "revision": "1d2f3q",
                      "template": "{\"apiVersion\":\"v1\",\"kind\":\"Template\",\"metadata\":{\"name\":\"cicd-template\"},\"objects\":{\"apiVersion\":\"v1\",\"kind\":\"ProjectRequest\",\"metadata\":{\"name\":\"$USERNAME-cicd\"}}}\n",
                      "type": "cicd"
                    },
                    {
                      "revision": "a34r57",
                      "template": "{\"apiVersion\":\"v1\",\"kind\":\"Template\",\"metadata\":{\"name\":\"stage-template\"},\"objects\":{\"apiVersion\":\"v1\",\"kind\":\"ProjectRequest\",\"metadata\":{\"name\":\"$USERNAME-stage\"}}}\n",
                      "type": "stage"
                    },
                    {
                      "revision": "ra24qw",
                      "template": "{\"apiVersion\":\"v1\",\"kind\":\"Template\",\"metadata\":{\"name\":\"default-template\"},\"objects\":{\"apiVersion\":\"v1\",\"kind\":\"ProjectRequest\",\"metadata\":{\"name\":\"$USERNAME\"}}}\n",
                      "type": "default"
                    }
                  ]
                }
              },
              {
                "apiVersion": "toolchain.dev.openshift.com/v1alpha1",
                "kind": "UserSignup",
                "metadata": {
                  "name": "1a03ecac-7c0b-44fc-b66d-12dd7fb21c40"
                },
                "spec": {
                  "approved": true,
                  "compliantUsername": "johnsmith-at-redhat-com",
                  "targetCluster": "east-2a",
                  "username": "johnsmith@redhat.com"
                }
              }
            ]
          capabilities: Basic Install
        name: toolchain-host-operator.v0.0.1
        namespace: placeholder
      spec:
        apiservicedefinitions: {}
        customresourcedefinitions:
          owned:
          - description: MasterUserRecord keeps all information about user, user accounts
              and namespaces provisioned in CodeReady Toolchain SaaS system
            displayName: MasterUserRecord
            kind: MasterUserRecord
            name: masteruserrecords.toolchain.dev.openshift.com
            version: v1alpha1
          - description: NSTemplateTier configures user environment via templates used for
              namespaces the user has access to
            displayName: NSTemplateTier
            kind: NSTemplateTier
            name: nstemplatetiers.toolchain.dev.openshift.com
            version: v1alpha1
          - description: UserSignup registres a user in the CodeReady Toolchain SaaS system
            displayName: UserSignup
            kind: UserSignup
            name: usersignups.toolchain.dev.openshift.com
            version: v1alpha1
        description: Placeholder description
        displayName: Host Operator
        install:
          spec:
            clusterPermissions:
            - rules:
              - apiGroups:
                - ""
                resources:
                - nodes
                - namespaces
                - componentstatuses
                verbs:
                - get
                - list
              - apiGroups:
                - apiextensions.k8s.io
                resources:
                - customresourcedefinitions
                verbs:
                - get
                - create
                - list
                - watch
              serviceAccountName: host-operator
            deployments:
            - name: host-operator
              spec:
                replicas: 1
                selector:
                  matchLabels:
                    name: host-operator
                strategy: {}
                template:
                  metadata:
                    labels:
                      name: host-operator
                  spec:
                    containers:
                    - command:
                      - host-operator
                      env:
                      - name: WATCH_NAMESPACE
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.annotations['olm.targetNamespaces']
                      - name: POD_NAME
                        valueFrom:
                          fieldRef:
                            fieldPath: metadata.name
                      - name: OPERATOR_NAME
                        value: host-operator
                      image: REPLACE_IMAGE
                      imagePullPolicy: IfNotPresent
                      name: host-operator
                      resources: {}
                    serviceAccountName: host-operator
            permissions:
            - rules:
              - apiGroups:
                - ""
                resources:
                - pods
                - services
                - endpoints
                - persistentvolumeclaims
                - events
                - configmaps
                - secrets
                verbs:
                - '*'
              - apiGroups:
                - ""
                resources:
                - podtemplates
                - resourcequotas
                - serviceaccounts
                - replicationcontrollers
                - limitranges
                verbs:
                - get
                - list
              - apiGroups:
                - apps
                resources:
                - deployments
                - daemonsets
                - replicasets
                - statefulsets
                verbs:
                - '*'
              - apiGroups:
                - apps
                resourceNames:
                - host-operator
                resources:
                - deployments/finalizers
                verbs:
                - update
              - apiGroups:
                - template.openshift.io
                resources:
                - processedtemplates
                verbs:
                - list
              - apiGroups:
                - monitoring.coreos.com
                resources:
                - servicemonitors
                verbs:
                - get
                - create
              - apiGroups:
                - core.kubefed.io
                resources:
                - kubefedclusters
                verbs:
                - '*'
              - apiGroups:
                - core.kubefed.io
                resources:
                - kubefedclusters/status
                verbs:
                - update
              - apiGroups:
                - toolchain.dev.openshift.com
                resources:
                - '*'
                verbs:
                - '*'
              serviceAccountName: host-operator
          strategy: deployment
        installModes:
        - supported: true
          type: OwnNamespace
        - supported: true
          type: SingleNamespace
        - supported: false
          type: MultiNamespace
        - supported: true
          type: AllNamespaces
        maturity: alpha
        provider: {}
        version: 0.0.1
  packages: |
    - channels:
      - currentCSV: toolchain-host-operator.v0.0.1
        name: alpha
      defaultChannel: alpha
      packageName: toolchain-host-operator
